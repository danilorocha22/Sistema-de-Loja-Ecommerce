<!DOCTYPE html>
<html th:fragment="modelheader" lang="pt-br" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, user-scalable=no"/>
        <link href="/webjars/bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
        <script src="/webjars/jquery/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
        <title>Loja TendyTudo</title>
    </head>
    <body class="d-flex flex-column h-100" style="background-image: url('/images/background.png')">
        <header class="site-header bg-light">
            <nav class="container-fluid navbar navbar-expand-lg navbar-light">
                <div class="container">
                    <a class="navbar-brand" href="/"><i class="fas fa-store d-inline fa-2x"></i>
                        <h3 class="ms-2 d-inline" style="position: relative; bottom: 6px">TendyTudo</h3></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
                            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNavDropdown" >
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" sec:authorize="hasRole('EDITOR')" th:href="@{/vendas/catalogo}">Catálogo</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" sec:authorize="hasRole('EDITOR')" th:href="@{/vendas/minhascompras}">Minhas compras</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" sec:authorize="hasRole('ADMIN')" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    Cadastrar
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <li><a class="dropdown-item" sec:authorize="hasRole('ADMIN')" th:href="@{/produtos/form}">Produto</a></li>
                                    <li><a class="dropdown-item" sec:authorize="hasRole('ADMIN')" th:href="@{/clientes/form}">Cliente</a></li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" sec:authorize="hasRole('ADMIN')" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    Consultar
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <li><a class="dropdown-item" sec:authorize="hasRole('ADMIN')" th:href="@{/produtos/list}">Produtos</a></li>
                                    <li><a class="dropdown-item" sec:authorize="hasRole('ADMIN')" th:href="@{/clientes/list}">Clientes</a></li>
                                    <li><a class="dropdown-item" sec:authorize="hasRole('ADMIN')" th:href="@{/vendas/list}">Vendas</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <form class="float-sm-end align-self-center col-3" sec:authorize="hasRole('EDITOR')"
                          style="position: relative; top: 7px" th:action="@{/vendas/buscarproduto}">
                        <div class="d-flex d-inline position-relative ms-2 me-2">
                            <span class="align-self-center position-absolute ms-2">
                                <i class="fa fa-search text-primary fs-5" aria-hidden="true"></i>
                            </span>
                            <input class="form-control" style="padding-left: 35px" type="search" placeholder="Buscar produto..."
                                   th:name="buscarProduto" aria-label="Buscar produto">
                        </div>
                        <div>
                            <i th:class="${!#strings.isEmpty(erroProduto)}?'fas fs-6 text-danger p-1 ps-0 fa-exclamation-triangle'"
                               th:text="${!#strings.isEmpty(erroProduto)}?${erroProduto}"></i>
                        </div>
                    </form>

                    <div class="text-black-50 fs-7 ms-2 me-1">
                        Olá,
                    </div>
                    <a class=" text-secondary badge px-2 border border-2 py-1 text-decoration-none shadow-sm"
                       title="Meu perfil" th:href="@{/clientes/meuperfil}">
                        <i class="fs-4 fa fa-user-circle mb-1"></i>
                        <div >
                             <span sec:authentication="name"></span>
                        </div>
                    </a>
                    <div>
                        <a class="nav-link" title="Meu carrinho" sec:authorize="hasRole('EDITOR')" th:href="@{/vendas/form}">
                            <i class="fas fa-shopping-cart fs-5"></i>
                        </a>
                    </div>
                    <form th:action="@{/logout}" method="post" class="navbar-form navbar-right ms-2 my-2
                     my-lg-0">
                        <button type="submit" class="btn btn-outline-primary fs-6 px-1">
                            <i class="fa fa-sign-out" title="Logout" aria-hidden="true"></i>
                        </button>
                    </form>
                </div>
            </nav>
        </header>
        <main class="flex-shrink-0 mt-3">





